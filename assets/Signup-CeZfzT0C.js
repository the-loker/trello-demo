import{u as y,e as S,j as E,k as h,l as U,d as w,m as V,o as d,c as m,h as e,F as v,n as k,p as q,b as r,q as _,v as f,i as x,t as B,a as D}from"./index-DhxZ2PwS.js";import{c as $,a as g}from"./index.esm-BqjAheMm.js";const N=()=>{const p=y(),{signin:t,signup:n}=S(),c=$({username:g().label("Username").min(3).max(150).required("User name is required field"),email:g().label("Email"),password:g().label("Password").min(8).required("Password is required field")}),o=E({username:"",email:"",password:""}),l=h(!1),i=h([]),b=U(()=>!!i.value.length);function s(){i.value=[]}async function a(){s(),l.value=!0;try{return await c.validate(o,{abortEarly:!0}),await n({username:o.username,email:o.email,password:o.password}),await t({username:o.username,password:o.password}),await p.push({name:"private-board"})}catch(u){if(u instanceof Error)return i.value.push(u.message);console.error(u)}finally{l.value=!1}}return{formData:o,isLoading:l,errors:i,hasErrors:b,clearErrors:s,onSignup:a}},F={key:0,class:"errors"},L={class:"signup-form__item"},P=["disabled"],C={class:"signup-form__item"},M=["disabled"],j={class:"signup-form__item"},A=["disabled"],R=["disabled"],T=w({__name:"signup-form",setup(p){const{formData:t,isLoading:n,errors:c,hasErrors:o,clearErrors:l,onSignup:i}=N();return V(()=>l()),(b,s)=>(d(),m(v,null,[e(o)?(d(),m("div",F,[(d(!0),m(v,null,k(e(c),(a,u)=>(d(),m("div",{key:u,class:"errors__message"},[r("span",null,B(a),1)]))),128))])):q("",!0),r("form",{class:"signup-form",onSubmit:s[3]||(s[3]=x((...a)=>e(i)&&e(i)(...a),["prevent"]))},[r("div",L,[_(r("input",{class:"input","onUpdate:modelValue":s[0]||(s[0]=a=>e(t).username=a),placeholder:"Name",disabled:e(n)},null,8,P),[[f,e(t).username]])]),r("div",C,[_(r("input",{class:"input","onUpdate:modelValue":s[1]||(s[1]=a=>e(t).email=a),placeholder:"Email",disabled:e(n)},null,8,M),[[f,e(t).email]])]),r("div",j,[_(r("input",{type:"password",class:"input","onUpdate:modelValue":s[2]||(s[2]=a=>e(t).password=a),placeholder:"Password",disabled:e(n)},null,8,A),[[f,e(t).password]])]),r("button",{class:"button button--primary",type:"submit",disabled:e(n)}," Sign up ",8,R)],32)],64))}}),z={class:"signup-content"},G=r("h1",{class:"page-title"},"Sign up",-1),J=w({__name:"Signup",setup(p){return(t,n)=>(d(),m("div",z,[G,D(T)]))}});export{J as default};
